<html>
<head>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/fabric.min.js"></script>
    <script type="text/javascript" src="js/angular.js"></script>
    <script type="text/javascript" src="js/fabric.js"></script>
    <script type="text/javascript" src="js/fabricCanvas.js"></script>
    <script type="text/javascript" src="js/fabricConstants.js"></script>
    <script type="text/javascript" src="js/fabricDirective.js"></script>
    <script type="text/javascript" src="js/fabricDirtyStatus.js"></script>
    <script type="text/javascript" src="js/fabricUtilities.js"></script>
    <script type="text/javascript" src="js/fabricWindow.js"></script>
    <script type="text/javascript" src="js/spectrum.js"></script>
    <script type="text/javascript" src="js/jquery.bpopup.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>


    <link type="text/css" rel="stylesheet" href="css/style.css" />
    <link type="text/css" rel="stylesheet" href="css/spectrum.css" />
    <link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="css/font-awesome.min.css" />
</head>
<body>
<div ng-app='example' ng-controller="ExampleCtrl" style="width:783px; height: 540px;">
    <div class='image-builder-container'>
        <div ng-if="fabric.isLoading()" class="image-loading">
            <div class="loading-indicator"></div>
        </div>



        <br />

        <!--<div class="row">

            <div class='col-xs-4'>
                <label>Canvas Size</label>
                <br />
                <button  ng-hide='canvasCopy' class='btn btn-default btn-block mrm' ng-click='selectCanvas()'>
                    {{ fabric.canvasOriginalWidth }} x {{ fabric.canvasOriginalHeight }}
                </button>

                <div class='row' ng-show='canvasCopy'>
                    <div class='col-xs-12'>
                        <form ng-submit='setCanvasSize()'>
                            <div class='form-group'>
                                <label>Width</label>
                                <input type='text' ng-model='canvasCopy.width' class='form-control' />
                            </div>

                            <div class='form-group'>
                                <label>Height</label>
                                <input type='text' ng-model='canvasCopy.height' class='form-control' />
                            </div>

                            <button type='submit' class='btn btn-success'>
                                Submit
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <div class='col-xs-4'>
                <label>&nbsp;</label>
                <br />
                <div class="btn-group col-xs-12">
                    <a class="btn btn-block btn-default dropdown-toggle" data-toggle="dropdown" href="#">
                        Preset Sizes
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu pull-right">
                        <li ng-click='fabric.setCanvasSize(size.width, size.height); fabric.setDirty(true)' ng-repeat='size in FabricConstants.presetSizes'>
                            <a>{{ size.name }}</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>-->

        <div id="previousImages" style="display: none;">
            <img src="Koala.jpg" ng-click='addImage()' style="width: 160px; height: 100px;" />
            <img src="Koala.jpg" ng-click='addImage()' style="width: 160px; height: 100px;" />
            <img src="Koala.jpg" ng-click='addImage()' style="width: 160px; height: 100px;" />
            <img src="Koala.jpg" ng-click='addImage()' style="width: 160px; height: 100px;" />
        </div>

        <div id='mainApp' class='row' style="background-color: #E6E2D9; max-width: 783px; max-height: 540px;">


            <div class="col-xs-2">

                <ul class="mainNav">
                    <li>
                        <input type="checkbox" checked>
                        <i class="arrow"></i>
                        <h2>Background</h2>
                        <p>
                            Background Color <br />
                            <input type="text" id="backgroundValue" style="display: none;" class='form-control' ng-change='fabric.setDirty(true); fabric.stopContinuousRendering()' ng-model="fabric.canvasBackgroundColor" />
                            <input type='text' id="colorPicker" />
                        </p>
                    </li>
                    <li>
                        <input type="checkbox" checked>
                        <i class="arrow"></i>
                        <h2>Text</h2>
                        <p>
                            <button ng-click="fabric.addText()" class='btn btn-default' style="margin: 5px 0 0 32px">
                                <i class='fa fa-font'></i>
                                <div class='clearfix'></div>
                                &nbsp; Text &nbsp;
                            </button>
                        </p>
                    </li>
                    <li>
                        <input type="checkbox" checked>
                        <i class="arrow"></i>
                        <h2>Image</h2>
                        <p>
                            <button ng-click='addImage()' class='btn btn-default' style="margin: 5px 0 0 19px">
                            <i class='fa fa-image'></i>
                            <div class='clearfix'></div>
                            Add image
                            </button>

                            <button id='loadImagesButton' class='btn btn-default' style="margin: 10px 0 0 12px">
                                <i class='fa fa-archive'></i>
                                <div class='clearfix'></div>
                                Load images
                            </button>
                        </p>
                    </li>
                </ul>

                <br />
                <div class='btn-group pull-left mrm'>
                    <button ng-disabled="!fabric.selectedObject" ng-click="fabric.deleteActiveObject(); fabric.setDirty(true)" class='btn btn-danger' style="margin: 1% 0 0 32px">
                        <i class='fa fa-trash-o'></i>
                        <div class='clearfix'></div>
                        Delete
                    </button>


                    <!--<button ng-click='addShape()' class='btn btn-default'>
                        <i class='fa fa-star'></i>
                        <div class='clearfix'></div>
                        Shapes
                    </button>-->

                </div>



            </div>

            <div class='col-xs-3 floatingPrompt' style="position: absolute; z-index: 200; text-align: center" ng-if='fabric.selectedObject'>
                <div>
                    <div ng-switch='fabric.selectedObject.type' style="">
                        <div ng-switch-when='text'>

                            <p>
                                <textarea style="text-align: {{ fabric.selectedObject.textAlign }}" class="form-control" rows="4" ng-model="fabric.selectedObject.text"></textarea>
                            </p>

                            <p title="Font size">
                                <i class="fa fa-text-height"></i>
                                <input type='number' class="form-control" ng-model="fabric.selectedObject.fontSize" style="width: 62px; display: inline-block !important;"/>

                                <i class="fa fa-align-left"></i>
                                <input type='number' class="form-control" ng-model="fabric.selectedObject.lineHeight" style="width: 62px; display: inline-block !important;" step=".1" />
                            </p>

                            <script type="text/javascript">
                                $("#textColorPicker").spectrum({
                                    color: "#fff",
                                    preferredFormat: "hex",
                                    showInput: true,
                                    change: function(color) {
                                        console.log(color.toHexString()); // #ff0000
                                        $('#textColorValue').val(color.toHexString());
                                        $('#textColorValue').trigger('input');
                                    }
                                });

                                var topLeftPos = $('#mainApp').offset();

                                $(".floatingPrompt").css({
                                    'left': topLeftPos.left+690,
                                    'top': topLeftPos.top-130
                                });
                            </script>

                            <div class="row" ng-hide="fabric.selectedObject.type == 'image'">
                                <div class="col-sm-12">
                                    Text Color
                                    <input type="text" class='form-control' ng-model="fabric.selectedObject.fill" id="textColorValue" style="display: none;"/>
                                    <input type='text' id="textColorPicker" />
                                </div>
                            </div>

                            <div class="row">
                                <div class="btn-group">

                                    <a class="btn btn-default btn-block dropdown-toggle" data-toggle="dropdown" href="#">
                                    <span class='object-font-family-preview' style='font-family: "{{ fabric.selectedObject.fontFamily }}";'>
                                      {{ fabric.selectedObject.fontFamily }}
                                    </span>
                                        <span class="caret"></span>
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li ng-repeat='font in FabricConstants.fonts' ng-click='fabric.selectedObject.fontFamily = font.name' style='font-family: "{{ font.name }}";'>
                                            <a>{{ font.name }}</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <br />

                            <div class='btn-group'>
                                <button ng-class="{ active: fabric.selectedObject.textAlign == 'left' }" ng-click="fabric.selectedObject.textAlign = 'left'" class='btn btn-small'>
                                    <i class='fa fa-align-left'></i>
                                </button>

                                <button ng-class="{ active: fabric.selectedObject.textAlign == 'center' }" ng-click="fabric.selectedObject.textAlign = 'center'" class='btn btn-small'>
                                    <i class='fa fa-align-center'></i>
                                </button>

                                <button ng-class="{ active: fabric.selectedObject.textAlign == 'right' }" ng-click="fabric.selectedObject.textAlign = 'right'" class='btn btn-small'>
                                    <i class='fa fa-align-right'></i>
                                </button>
                            </div>

                            <br />

                            <div class='btn-group'>
                                <button ng-class="{ active: fabric.isBold() }" ng-click="fabric.toggleBold()" class='btn btn-small'>
                                    <i class='fa fa-bold'></i>
                                </button>

                                <button ng-class="{ active: fabric.isItalic() }" ng-click="fabric.toggleItalic()" class='btn btn-small'>
                                    <i class='fa fa-italic'></i>
                                </button>

                                <button ng-class="{ active: fabric.isUnderline() }" ng-click="fabric.toggleUnderline()" class='btn btn-small'>
                                    <i class='fa fa-underline'></i>
                                </button>

                                <button ng-class="{ active: fabric.isLinethrough() }" ng-click="fabric.toggleLinethrough()" class='btn btn-small'>
                                    <i class='fa fa-strikethrough'></i>
                                </button>
                            </div>

                            <br />


                        </div>

                        <!--<div ng-switch-when="image">
                            <div class="input-prepend">
                                <button ng-class="{ active: fabric.isTinted() }" ng-click="fabric.toggleTint()" class='btn'>
                                    <i class='fa fa-tint'></i>
                                </button>
                                <input type="text" class='input-small' ng-model='fabric.selectedObject.tint' />
                            </div>
                        </div>-->
                    </div>

                    <div class="row">
                        <div class="btn-group">
                            <input class='col-sm-12' title="Transparency" type='range'
                                   min="0"
                                   max="1"
                                   step=".01"
                                   ng-model="fabric.selectedObject.opacity" />
                        </div>
                    </div>

                    <div class="row mbm">
                        <div class="btn-group">
                            <button class='btn btn-small btn-block' ng-class="{ active: fabric.getFlipX() }" ng-click="{ active: fabric.toggleFlipX() }">
                                <i class='fa fa-exchange'></i> Flip
                            </button>
                        </div>
                        <br />

                        <h5>Centering:</h5>

                        <div class="btn-group">
                            <button ng-click='fabric.center()' class='btn btn-small'>
                                <i class='fa fa-arrows' title="Center the selected object"></i>
                            </button>

                            <button ng-click='fabric.centerH()' class='btn btn-small'>
                                <i class='fa fa-arrows-h' title="Center the selected object horizontally"></i>
                            </button>

                            <button ng-click='fabric.centerV()' class='btn btn-small'>
                                <i class='fa fa-arrows-v' title="Center the selected object vertically"></i>
                            </button>
                        </div>

                        <h5>Ordering:</h5>

                        <div class="btn-group">
                            <button ng-click='fabric.bringToFront(); fabric.setDirty(true)' class='btn btn-small'>
                                <i class='fa fa-arrow-circle-right' title="Bring to front"></i>
                            </button>

                            <button ng-click='fabric.bringForward(); fabric.setDirty(true)' class='btn btn-small'>
                                <i class='fa fa-arrow-circle-o-right' title="Bring forwards"></i>
                            </button>

                            <button ng-click='fabric.sendBackwards(); fabric.setDirty(true)' class='btn btn-small'>
                                <i class='fa fa-arrow-circle-o-left' title="Send backwards"></i>
                            </button>

                            <button ng-click='fabric.sendToBack(); fabric.setDirty(true)' class='btn btn-small'>
                                <i class='fa fa-arrow-circle-left' title="Send to back"></i>
                            </button>
                        </div>
                    </div>

                    <br />

                    <button ng-click='fabric.toggleLockActiveObject(); fabric.setDirty(true)' ng-class="{ active: fabric.selectedObject.lockObject }" class='btn btn-small btn-block'>
                        Lock
                    </button>
                </div>
            </div>

            <script ng-if='!fabric.selectedObject'>
                //$(".sp-container").remove();
            </script>

            <div class='col-xs-9' style="background-color: #CACACA;margin-left: 30px;padding-bottom: 10px;">
                <div class='image-builder' parent-click="fabric.deactivateAll()">
                    <div class='fabric-container'>
                        <canvas fabric='fabric'></canvas>
                    </div>
                </div>


                <div style="padding: 40px 3px 0 3px;">

                    <button ng-click="fabric.clearCanvas(); fabric.setDirty(true)" class='btn btn-default'>
                        <i class='fa fa-refresh'></i>
                        <div class='clearfix'></div>
                        Reset
                    </button>

                    <button class='btn btn-default' ng-click='savePage()' title='Save the image.'>
                        <i class='fa fa-save'></i>
                        <div class='clearfix'></div>
                        Save <span ng-show='fabric.isDirty()' class='text-danger'>*</span>
                    </button>

                    <button ng-click="fabric.download('myCanvas')" class='btn btn-default'>
                        <i class='fa fa-download'></i>
                        <div class='clearfix'></div>
                        Download
                    </button>

                    <button ng-click="loadPage()" class='btn btn-default'>
                        <i class='fa fa-upload'></i>
                        <div class='clearfix'></div>
                        Load
                    </button>

                    <div style='margin: 15px 0 0 10px; width: 250px; display: inline-block;' class="pull-right">
                        <div class='col-xs-1 text-center'>
                            <i class='fa fa-search-minus pull-left'></i>
                        </div>
                        <div class='col-xs-5'>
                            <input type='range' class='pull-left' min='.1' max='3' step='.1' ng-change='fabric.setZoom()' ng-model='fabric.canvasScale' />
                        </div>
                        <div class='col-xs-1 text-center'>
                            <i class='fa fa-search-plus'></i>
                        </div>
                        <div class='col-xs-3'>
                            <button class='btn btn-xs' ng-click="fabric.resetZoom()">
                                Reset zoom
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            </div>



    </div>
</div>

</body>
</html>